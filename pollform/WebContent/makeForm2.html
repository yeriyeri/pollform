<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>welcome!</title>
<link type="text/css" rel="stylesheet" href="normalize.css" />
<link type="text/css" rel="stylesheet" href="my_style.css" />
<script language="javascript">
	function categoryChange() {// 대분류 변한 경우
	 var x = document.makeForm.largeCategory.options.selectedIndex;//선택한 인덱스
	 var groups=document.makeForm.largeCategory.options.length;//대분류 갯수
	 var group=new Array(groups);//배열 생성
	 for (i=0; i<groups; i++) {
	  group[i]=new Array();
	 }
	 // 옵션(<option>) 생성
	 group[0][0]=new Option("세부 분류","sCtg");
	 group[1][0]=new Option("세부 분류","sCtg");
	 group[1][1]=new Option("학교 교육","sCtg1");
	 group[1][2]=new Option("교육 일반","sCtg2");
	 group[2][0]=new Option("세부 분류","sCtg");
	 group[2][1]=new Option("문학 도서","sCtg3");
	 group[2][2]=new Option("순수예술","sCtg4");
	 group[2][3]=new Option("영화/가요/연예","sCtg5");
	 group[2][4]=new Option("문화 일반","sCtg6");
	 group[3][0]=new Option("세부 분류","sCtg");
	 group[3][1]=new Option("TV","sCtg7");
	 group[3][2]=new Option("라디오","sCtg8");
	 group[3][3]=new Option("신문","sCtg9");
	 group[3][4]=new Option("기타 매체","sCtg10");
	 group[4][0]=new Option("세부 분류","sCtg");
	 group[4][1]=new Option("복지","sCtg11");
	 group[4][2]=new Option("자연/환경","sCtg12");
	 group[4][3]=new Option("사회 일반","sCtg13");
	 group[5][0]=new Option("세부 분류","sCtg");
	 group[5][2]=new Option("국방","sCtg14");
	 group[5][1]=new Option("국회","sCtg15");
	 group[5][3]=new Option("대통령","sCtg16");
	 group[5][4]=new Option("사법/치안","sCtg17");
	 group[5][5]=new Option("정당","sCtg18");
	 group[5][6]=new Option("정부","sCtg19");
	 group[5][7]=new Option("행정","sCtg20");
	 group[5][8]=new Option("정치 일반","sCtg21");
	 group[6][0]=new Option("세부 분류","sCtg");
	 group[6][1]=new Option("건설","sCtg22");
	 group[6][2]=new Option("과학","sCtg23");
	 group[6][3]=new Option("교통","sCtg24");
	 group[6][4]=new Option("금융","sCtg25");
	 group[6][5]=new Option("기업","sCtg26");
	 group[6][6]=new Option("대외경제/무역","sCtg27");
	 group[6][7]=new Option("부동산","sCtg28");
	 group[6][8]=new Option("경제 일반","sCtg29");
	 group[6][9]=new Option("산업 일반","sCtg30");
	 group[7][0]=new Option("세부 분류","sCtg");
	 group[7][1]=new Option("가정/결혼","sCtg31");
	 group[7][2]=new Option("관광","sCtg32");
	 group[7][3]=new Option("소비","sCtg33");
	 group[7][4]=new Option("여가","sCtg34");
	 group[7][5]=new Option("정보","sCtg35");
	 group[7][6]=new Option("직장","sCtg36");
	 group[7][7]=new Option("정보/통신","sCtg37");
	 group[7][8]=new Option("기타 일반","sCtg38");
	 group[8][0]=new Option("세부 분류","sCtg");
	 group[8][1]=new Option("교포/외국인","sCtg39");
	 group[8][2]=new Option("노인","sCtg40");
	 group[8][3]=new Option("성인","sCtg41");
	 group[8][4]=new Option("아동","sCtg42");
	 group[8][5]=new Option("장애인","sCtg43");
	 group[8][6]=new Option("청소년","sCtg44");
	 group[8][7]=new Option("복지","sCtg45");
	 group[9][0]=new Option("세부 분류","sCtg");
	 group[9][1]=new Option("기타","sCtg46");
	 temp = document.makeForm.smallCategory;
	 for (m = temp.options.length-1 ; m > 0 ; m--) {//현재 값 지우기
	  temp.options[m]=null
	 }
	 for (i=0;i<group[x].length;i++){//값 셋팅
	  temp.options[i]=new Option(group[x][i].text,group[x][i].value);
	 }
	 temp.options[0].selected=true//인덱스 0번째, 즉, 첫번째 선택
	}
	
	function typeChange() {// 대분류 변한 경우
		 var x = document.makeForm.largeType.options.selectedIndex;//선택한 인덱스
		 if(x == 3){
 			 document.makeForm.smallType.style.display="none";
 			 document.makeForm.qAmount.style.display="none";
 			 document.getElementById("str").style.display="none";
		 }
		 var groups=document.makeForm.largeType.options.length;//대분류 갯수
		 var group=new Array(groups);//배열 생성
		 for (i=0; i<groups; i++) {
		  group[i]=new Array();
		 }
		 // 옵션(<option>) 생성
		 group[0][0]=new Option("세부 유형","sType");
		 group[1][0]=new Option("세부 유형","sType");
		 group[1][1]=new Option("4지선다형","sType1");
		 group[1][2]=new Option("5지선다형","sType2");
		 group[2][0]=new Option("세부 유형","sType");
		 group[2][1]=new Option("단답형 (한글 10자, 영문 20자)","sType3");
		 group[2][2]=new Option("서술형 ","sType4");
		 temp = document.makeForm.smallType;
		 for (m = temp.options.length-1 ; m > 0 ; m--) {//현재 값 지우기
		  temp.options[m]=null
		 }
		 for (i=0;i<group[x].length;i++){//값 셋팅
		  temp.options[i]=new Option(group[x][i].text,group[x][i].value);
		 }
		 temp.options[0].selected=true//인덱스 0번째, 즉, 첫번째 선택
		}
	
	 function numCheck(object){
		   if (object.value < 1){
		    object.value = 1;
		   }
	 }
	 
	 function valid_Check(){
		checkForm=document.makeForm;
		var today = new Date();
		var date = today.getDate();
		var month = today.getMonth()+1;
		var year = today.getFullYear(); 
		var hour = today.getHours();
		var minute = today.getMinutes();
		if(hour < 10)
			hour = "0" + String(hour); 
		if(minute < 10)
			minute = "0" + String(minute); 
		
		today = String(year) + String(month) + String(date) + String(hour) + String(minute);
		today = parseInt(today);
		var startDateArray = checkForm.startDate.value.split("-");
		var startDate = startDateArray[0] + startDateArray[1] + startDateArray[2];
		startDateArray = startDate.split("T");
		startDate = startDateArray[0] + startDateArray[1];
		startDateArray = startDate.split(":");
		startDate = startDateArray[0] + startDateArray[1];
		startDate = parseInt(startDate);
		
		var endDateArray = checkForm.endDate.value.split("-");
		var endDate = endDateArray[0] + endDateArray[1] + endDateArray[2];
		endDateArray = endDate.split("T");
		endDate = endDateArray[0] + endDateArray[1];
		endDateArray = endDate.split(":");
		endDate = endDateArray[0] + endDateArray[1];
		endDate = parseInt(endDate);
		
		var chkCode;
		if ((endDate-startDate)<0)
			chkCode = "chkCode1";
		else if((endDate-startDate)<30)
			chkCode = "chkCode2";
		
			if(checkForm.title.value=="" || checkForm.largeCategory.value=="" || checkForm.smallCategory.value=="" || checkForm.largeType.value=="" || checkForm.smallType.value=="" || checkForm.qAmount.value==""
					|| checkForm.startDate.value=="" || (startDate < today)|| checkForm.endDate.value=="" || chkCode=="chkCode1" || chkCode=="chkCode2" || checkForm.tag.value==""){
				if(checkForm.title.value==""){
					alert("제목란이 비어있습니다.");
					checkForm.title.focus();
					return false;
				} else if(checkForm.largeCategory.value=="lCtg"){
					alert("대분류란이 비어있습니다.")
					checkForm.largeCategory.focus();
					return false;
				} else if(checkForm.smallCategory.value=="sCtg"){
					alert("세부 분류란이 비어있습니다.")
					checkForm.smallCategory.focus();
					return false;
				} else if(checkForm.largeType.value=="lType"){
					alert("유형란이 비어있습니다.")
					checkForm.largeType.focus();
					return false;
				} else if(checkForm.smallType.value=="sType"){
					alert("세부유형란이 비어있습니다.")
					checkForm.smallType.focus();
					return false;
				} else if(checkForm.qAmount.value==""){
					alert("문항수란이 비어있습니다.");
					checkForm.qAmount.focus();
					return false;
				} else if(checkForm.startDate.value==""){
					alert("시작일란이 비어있습니다.")
					checkForm.startDate.focus();
					return false;
				} else if(startDate < today){
				    alert("시작일이 현재 날짜보다 이전입니다.");
					checkForm.startDate.focus();
					return false;
				} else if(checkForm.endDate.value==""){
				    alert("마감일란이 비어있습니다." );
					checkForm.endDate.focus();
					return false;
				} else if(chkCode=="chkCode1"){
				    alert("마감일이 시작일보다 이전입니다.");
					checkForm.endDate.focus();
					return false;
				} else if(chkCode=="chkCode2"){
				    alert("조사 소요 시간은 최소 30분입니다.");
					checkForm.endDate.focus();
					return false;
				} else if(checkForm.tag.value==""){
					alert("검색 태그가 비어있습니다.");
					checkForm.endDate.focus();
					return false;
				} else { 
					return true;
				}; 
			}
	 }
</script>
</head>
<body>
	<header>
		<div class="row align-right">
			<form>
				<div class="input-group">
					<input class="form-control" type="text" placeholder="Search for...">
					<span class="input-group-btn"> <input type="button"
						class="btn btn-primary" value="검색">
					</span>
				</div>
			</form>
			<a class="nav-link" href="index.html">LogIn</a>
		</div>
		<a class="header-a" href="index.html"><h2>
				&nbsp&nbsp&nbspStart Poll Form!
				<h2></a>
	</header>
	<div class="row" style="margin-top: 3%">
			<div class="col-8 input-box">
				<form method="POST" action="makeWebFormat.do" name="makeForm" onsubmit="return valid_Check(this);">
					<h3 >형식을 선택해주세요.</h3>
					<b >제목 <input type="text" name="title" class="makeLine"
					placeholder="research name"
					style="width: 150px; required: required" ></b>
					<select name="largeCategory" class="dropdown-el" onchange="categoryChange()" size=1>
						<option value="lCtg">대분류</option>
						<option value="lCtg1">교육</option>
						<option value="lCtg2">문화</option>
						<option value="lCtg3">매체</option>
						<option value="lCtg4">사회</option>
						<option value="lCtg5">정치</option>
						<option value="lCtg6">경제/산업</option>
						<option value="lCtg7">라이프스타일</option>
						<option value="lCtg8">특수계층조사</option>
						<option value="lCtg9">기타</option>
					</select>
					
						<select id="id-sCtg" name="smallCategory" class="dropdown-el" size=1>
					 		<option value="sCtg">세부 분류</option>
						</select>
					<br/>
					<select name="largeType" class="dropdown-el" onchange="typeChange()" required="required" size=1>
						<option value="lType" selected>유형</option>
						<option value="lType1">선다형</option>
						<option value="lType2">서답형</option>
						<option value="lType3">혼합형</option>
					</select>
					<select name="smallType" class="dropdown-el"  required="required" size=1>
						<option value="sType" selected>세부 유형</option>
					</select>
					<b id="str">문항수</b> <input type="number" name="qAmount"  value="1" class="makeLine" style="width: 50px; min: 1; max: 50; required: required" oninput="numCheck(this)">
					<div >
						<b>시작일</b> <input type="datetime-local" name="startDate" class="makeLine"><b>마감일</b> <input type="datetime-local" name="endDate" class="makeLine">
						<div>
							<input type="text" name="tag" class="makeLine" placeholder="검색 태그" >
						</div>
					</div>
					<input type="submit" class="btn btn-primary" onclick="document.getElementById('make_btn').submit();" value="선택한 툴로 이동" style="margin-top: 8%;">
				</form>
			</div>
	</div>
	<script type="text/javascript">
$( window ).resize(function() {
	   //창크기 변화 감지
	parent.document.location.reload();
	});
</script>
</body>
</html>